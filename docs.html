<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MapleSchema ‚Äî Developer Documentation (v1)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Developer documentation for MapleSchema v1 ‚Äî transform Canadian open banking transaction payloads into a single, deterministic JSON schema."
  />

  
  <!-- SEO + Social -->
  <meta property="og:title" content="MapleSchema ‚Äî Developer Documentation (v1)">
  <meta property="og:description" content="Learn how to call the MapleSchema v1 /transform endpoint, authenticate with API keys, and consume the transactions-v1.0 normalized schema.">
  <meta property="og:url" content="https://mapleschema.com/docs.html">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://mapleschema.com/images/mapleschema-social.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">

  <!-- Main stylesheet -->
  <link rel="stylesheet" href="/css/style.css" />
</head>

<body>
<div id="site">

<header>
  <div class="container header-inner">
    <a href="/index.html" class="logo-link">
      <div class="logo-wrapper">
        <img src="/images/mapleschema-transparent-icon.png"
             class="logo"
             alt="MapleSchema logo">
      </div>
    </a>

    <nav>
      <a href="/docs.html">Docs</a>
      <a href="/security.html">Security</a>
      <a href="/pricing.html">Pricing</a>
      <a href="/contact.html">Contact</a>
      <a href="/request-key.html" class="nav-cta">Get API Key</a>
    </nav>
  </div>
</header>



<main class="container">

  <!-- HERO -->
  <section class="hero">
    <h1>Developer Docs ‚Äî MapleSchema v1</h1>

    <p class="hero-lead">
      Transform Canadian open banking transaction payloads into a single, deterministic
      <code>transactions-v1.0</code> schema. This page covers base URLs, authentication,
      the <code>/v1/transactions/transform</code> endpoint, request and response formats, and error handling.
    </p>
  </section>

  <!-- QUICKSTART -->
 <section class="card" style="text-align:center;">
  <h2>Try a Live Transformation</h2>

  <p>
    Want to see a real <code>/v1/transactions/transform</code> response using live data?
    Run the interactive demo to submit a request and inspect the normalized output.
  </p>

  <p>
    <a href="/quickstart.html" class="button-primary">
      Run Live Demo
    </a>
  </p>

  <p class="small">
    This documentation describes the v1 contract.
    The demo executes real requests against the API.
  </p>
</section>

  <!-- BASE URLS / AUTH / ENDPOINT OVERVIEW -->
 <section class="docs-section">

    <article class="card">
  <h2>üîë Authentication</h2>

  <p>
    All requests to the MapleSchema API require two headers:
    a <strong>Project ID</strong> and an <strong>API Key</strong>.
    The Project ID identifies which project is making the request, and the API Key
    authenticates and authorizes that project. Both must be included for every call
    to <code>/v1/transactions/transform</code>.
  </p>

  <pre class="code-block">
X-Project-Id: YOUR_PROJECT_ID
X-Api-Key: YOUR_API_KEY
  </pre>

  <p>
    Your Project ID and API Key are generated when you request access through the website.
    Each key is scoped to a single project. Missing or invalid credentials will return a
    deterministic authentication error response.
  </p>
</article>
<article class="card">
  <h2>üîÅ Transform Endpoint</h2>

  <p>
    The primary endpoint in MapleSchema v1 is <code>POST /v1/transactions/transform</code>.
    It accepts institution-specific open banking transaction payloads and returns
    normalized <code>transactions-v1.0</code> objects. All processing is stateless
    and performed in memory.
  </p>

  <ul>
    <li><strong>Method</strong>: <code>POST</code></li>
    <li><strong>Path</strong>: <code>/v1/transactions/transform</code></li>
    <li><strong>Content-Type</strong>: <code>application/json</code></li>
    <li><strong>Auth</strong>: <code>X-Project-Id</code> and <code>X-Api-Key</code> headers</li>
  </ul>

  <pre class="code-block">
X-Project-Id: YOUR_PROJECT_ID
X-Api-Key: YOUR_API_KEY
  </pre>

  <p>
    The response from /v1/transactions/transform is a JSON object containing a metadata block
    and a transactions array conforming to the <code>transactions-v1.0</code> schema. 
    All timestamps are returned in UTC, and all amounts follow signed-value semantics paired with an explicit
    <code>direction</code> field for clarity across account types.
  </p>
</article>

  </section>

  <!-- REQUEST SCHEMA -->
  <section class="docs-section">

    <article class="card">
  <h2>üì• Request Body Overview</h2>

  <p>
    The request to <code>/v1/transactions/transform</code> contains a required
    <code>transactions</code> array and optional routing hints.
  </p>

  <pre class="code-block">
{
  "institution_code": "rbc_ca",
  "aggregator_code": "direct_ob",
  "transactions": [
    { /* transaction object */ }
  ]
}
  </pre>

  <ul>
    <li>
      <strong>transactions</strong> (array, required) ‚Äî list of transaction objects
      to normalize in this request.
    </li>
    <li>
      <strong>institution_code</strong> (string, optional) ‚Äî default institution
      mapping to apply when not specified per transaction.
    </li>
    <li>
      <strong>aggregator_code</strong> (string, optional) ‚Äî identifies the upstream
      provider (e.g. <code>"flinks"</code>, <code>"plaid"</code>, <code>"direct_ob"</code>).
    </li>
  </ul>

  <p class="small">
    When both top-level and per-transaction routing fields are provided,
    per-transaction values take precedence.
  </p>
</article>


    <article class="card">
  <h2>üìÑ Transaction Object ‚Äî Core Fields (v1)</h2>

  <p>
    Each item in the <code>transactions</code> array represents a single upstream
    transaction. Field availability varies by institution and aggregator.
  </p>

  <h3>Required</h3>
  <ul>
    <li>
      <code>posted_local_time</code> (string) ‚Äî local posted time in RFC3339 with offset,
      e.g. <code>2025-12-04T09:30:00-05:00</code>.
    </li>
    <li>
      <code>amount</code> (object) ‚Äî exact, unsigned monetary value.
    </li>
    <li>
      <code>direction</code> (string) ‚Äî <code>"debit"</code> or <code>"credit"</code>.
    </li>
    <li>
      <code>description</code> (string) ‚Äî raw description text from the upstream source.
    </li>
  </ul>

  <h3>Optional</h3>
  <ul>
    <li><code>value_local_time</code> ‚Äî local value date/time, when provided.</li>
    <li><code>authorized_local_time</code> ‚Äî authorization time for card transactions.</li>
    <li><code>transaction_type</code> ‚Äî coarse upstream type (e.g. <code>"CARD"</code>).</li>
    <li><code>status</code> ‚Äî upstream status (e.g. <code>"BOOKED"</code>).</li>
    <li><code>bank_transaction_code</code> ‚Äî standardized transaction code, when available.</li>
    <li><code>proprietary_code</code> ‚Äî institution-specific code.</li>
    <li><code>related_transaction_id</code> ‚Äî reference to a logically related transaction.</li>
    <li><code>metadata</code> ‚Äî free-form key/value bag.</li>
    <li><code>extras</code> ‚Äî passthrough fields preserved from the raw payload.</li>
    <li>
      <code>client_ref</code> ‚Äî optional, opaque identifier echoed back unchanged
      for client reconciliation.
    </li>
  </ul>

  <p class="small">
    MapleSchema does not enforce format or uniqueness for <code>client_ref</code>
    and does not interpret its value.
  </p>
</article>


  <!-- RESPONSE SCHEMA -->
  <section class="card">
    <h2>üì§ Normalized Response ‚Äî <code>transactions-v1.0</code></h2>

<p>
  The response from <code>/v1/transactions/transform</code> is a JSON object containing a
  <code>metadata</code> block describing the batch and a <code>transactions</code>
  array of normalized <code>transactions-v1.0</code> objects.
</p>


    <pre class="code-block">
{
  "metadata": {
    "request_id": "auto-1764972823590099100",
    "institution_code": "rbc_ca",
    "received_at": "2025-12-05T22:13:43.5900991Z",
    "processed_at": "2025-12-05T22:13:43.5900991Z",
    "input_count": 1,
    "output_count": 1,
    "failed_count": 0
  },
  "transactions": [
    {
      "schema_version": "transactions-v1.0",

      "stable_transaction_id": "rbc_ca-abc123",
      "institution_code": "rbc_ca",
      "aggregator_code": "direct_ob",
      "transaction_id": "abc123",
      "account_id": "chequing-001",

      "posted_at": "2026-01-12T19:30:00Z",
      "value_at": null,
      "value_local_time_raw": "2026-01-12T14:30:00-05:00",
      "authorized_at": null,

      "amount": -18.42,
      "currency": "CAD",
      "direction": "debit",

      "bank_transaction_code": "",
      "proprietary_code": "",
      "mcc": "",

      "transaction_type": "card",

      "original_description": "POS 07/12  UBER *TRIP   HELP.UBER.COM CA",
      "transformed_description": "Uber trip",
      "transformed_description_fr": "Course Uber",

      "merchant_name": "Uber Technologies",
      "merchant_name_fr": "Uber Technologies",
      "category": null,
      "status": "posted",

      "normalization": {
        "mapping_method": "rbc_ca_core_v1",
        "warnings": [],
        "input_timezone": "America/Toronto"
      },

      "insights": {
        "suggested_type": "card",
        "suggested_type_confidence": 0.92,
        "description_confidence": 0.97,
        "merchant_name_confidence": 0.98
      },

      "fx": null,

      "extras": {
        "raw_terminal_id": "UBR12345",
        "raw_processor_code": "POS_UBR"
      }
    }
  ]
}


    </pre>

    <p>
      All timestamps are UTC. Amounts are signed and paired with an explicit
      <code>direction</code> to make debits and credits unambiguous, regardless of account type.
    </p>
  </section>

  <!-- RESPONSE FIELD BREAKDOWN -->
  <!-- RESPONSE FIELD BREAKDOWN -->
  <section>
    <article class="card">
      <h2>Core Fields</h2>
      <ul>
        <li>
          <strong>schema_version</strong> (string, required) ‚Äî currently
          <code>"transactions-v1.0"</code>.
        </li>
        <li>
          <strong>institution_code</strong> (string, required) ‚Äî the code you provided on input,
          e.g. <code>"rbc_ca"</code>.
        </li>
        <li>
          <strong>transaction_id</strong> (string, required) ‚Äî derived from the institution ID
          when available; stable per institution.
        </li>
        <li>
          <strong>posted_at</strong> (string, required) ‚Äî posted time in UTC,
          <code>YYYY-MM-DDThh:mm:ssZ</code>.
        </li>
        <li>
          <strong>authorized_at</strong> (string, nullable) ‚Äî authorization time in UTC when
          distinguishable.
        </li>
      </ul>
    </article>

    <article class="card">
      <h2>Amount & Direction</h2>
      <ul>
        <li>
          <strong>amount</strong> (number, required) ‚Äî signed decimal amount. Debits from the
          account are typically negative, credits positive.
        </li>
        <li>
          <strong>currency</strong> (string, required) ‚Äî ISO currency code, e.g. <code>"CAD"</code>.
        </li>
        <li>
          <strong>direction</strong> (string, required) ‚Äî one of <code>"debit"</code> or
          <code>"credit"</code>, representing the direction relative to the account holder.
        </li>
        <li>
          <strong>transaction_type</strong> (string, required) ‚Äî high-level classification such
          as <code>"card"</code>, <code>"transfer"</code>, or <code>"fee"</code>.
        </li>
      </ul>
      <p class="small">
        Direction and signed amount are designed to be unambiguous across chequing, credit card,
        and line-of-credit accounts.
      </p>
    </article>

   <article class="card">
  <h2>Descriptions &amp; Merchant</h2>
  <ul>
    <li>
      <strong>original_description</strong> (string, required) ‚Äî raw description or
      merchant line from the institution.
    </li>
    <li>
      <strong>transformed_description</strong> (string, nullable) ‚Äî MapleSchema‚Äôs cleaned,
      human-readable description, when available.
    </li>
    <li>
      <strong>transformed_description_fr</strong> (string, nullable) ‚Äî French version of the
      transformed description, when available.
    </li>
    <li>
      <strong>merchant_name</strong> (string, nullable) ‚Äî normalized merchant or brand name.
    </li>
    <li>
      <strong>merchant_name_fr</strong> (string, nullable) ‚Äî French merchant or brand name,
      when available.
    </li>
  </ul>
</article>

<article class="card">
  <h2>Status &amp; Classification</h2>
  <ul>
    <li>
      <strong>status</strong> (string, required) ‚Äî normalized transaction status, such as
      <code>"posted"</code> or <code>"pending"</code>.
    </li>
    <li>
      <strong>category</strong> (object, nullable) ‚Äî reserved for future categorization;
      current integrations may treat this as opaque.
    </li>
  </ul>
</article>
<section class="card">
  <h2>Batch Metadata</h2>
  <p>
    The top-level <code>metadata</code> object describes the entire transform batch:
  </p>
  <ul>
    <li><strong>request_id</strong> ‚Äî identifier for this API call, useful for log correlation.</li>
    <li><strong>institution_code</strong> ‚Äî institution/adapter used for this batch.</li>
    <li><strong>received_at</strong>, <strong>processed_at</strong> ‚Äî UTC timestamps for when
        the batch was received and processed.</li>
    <li><strong>input_count</strong> ‚Äî number of transactions in the request payload.</li>
    <li><strong>output_count</strong> ‚Äî number of successfully normalized transactions.</li>
    <li><strong>failed_count</strong> ‚Äî number of transactions that failed validation or normalization.</li>
  </ul>
</section>

    <article class="card">
      <h2>Status, Country &amp; Meta</h2>
      <ul>
        <li>
          <strong>status</strong> (string, required) ‚Äî normalized transaction status, such as
          <code>"posted"</code> or <code>"pending"</code>.
        </li>
        <li>
          <strong>category</strong> (string, nullable) ‚Äî reserved for future categorization.
        </li>
        <li>
          <strong>country_code</strong> (string, nullable) ‚Äî ISO country code when derivable,
          e.g. <code>"CA"</code>.
        </li>
      </ul>
    </article>
  </section>
<article class="card">
  <h2>Changelog</h2>
  <p>The full version history of MapleSchema, shown in raw Markdown format.</p>
  <p><a href="/changelog.html">View Changelog ‚Üí</a></p>
</article>
  <!-- CONTACT -->
  <section class="card">
    <h2>Questions or Integration Help?</h2>
    <p>
      If you have questions about integrating MapleSchema, need clarification on the
      <code>transactions-v1.0</code> schema, or want to discuss higher-volume usage,
      reach out via the <a href="/contact.html">contact page</a>.
    </p>
  </section>

</main>

<footer>
  ¬© MapleSchema 2025 ‚Äî Sweet, Compliance-First Open Banking Normalization
</footer>

</div>
</body>
</html>
